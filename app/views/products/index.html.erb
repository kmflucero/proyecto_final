<h2>Carrito de compra</h2><br><hr style="background:#b4a895;">


<div class="container-fluid">
  
<div class="row">

  
<div class="col-sm-3" style="padding-left: 40px; padding-right: 0;">
  <div id="demo"> </div>
<button onclick="getLocation()">Try It</button>
      <h3><strong>Encuentra tu roll</strong></h3>
      <ul style="list-style: none; padding-left: 0;">
        <li>
          <div class="input-group mb-3">
      <div class="input-group-prepend">
        <span class="input-group-text" id="basic-addon1">
          <i class="fas fa-search"></i>
        </span>
      </div>
      <input id="buscar" type="text" class="form-control" placeholder="Pollo, Palta..." aria-label="Username" aria-describedby="basic-addon1" style="margin-right: 35px;">
    </div class="text-center">
      <h3><strong>Categorias</strong></h3>
        </li>
        <li>Categoria 1</li>
        <li>Categoria 2</li>
        <li>Categoria 3</li>
        <li>Categoria 4</li>
        <li>Categoria 5</li>
      </ul>
    </div>
    <div class="col-md-6" style="padding-left: 0; max-width: 630px">
       <div style="border: solid 1px #b4a895; width:100%;">
        <br>
        <h5 style="padding-left: 10px;">estos productos deben estar escondidos, y deben aparecer cuando se haga una busqueda</h5>
        <br>
        
      </div>
      
        <div class="row" id="products" width="650" style="margin-left: 15px;">
  
        </div> 
      <div id="accordion" style="width: 625px;">
  <% @categories.each do |category| %>      
  <div class="card">
    <div class="card-header" id="heading<%= category.id %>">
      <h5 class="mb-0">
        <button class="btn btn-link" data-toggle="collapse" data-target="#collapse<%= category.id %>" aria-expanded="true" aria-controls="collapse<%= category.id %>">
          <%= category.name %>
        </button>
      </h5>
    </div>

    <div id="collapse<%= category.id %>" class="collapse show" aria-labelledby="heading<%= category.id %>" data-parent="#accordion">
      <div class="card-body" style="padding:0;">
        <div style="margin-left: 0px; display: flex; flex-wrap: wrap; margin-right: -5px; width: 650px;">
           <%= render category.products %>
        </div>
      </div>
    </div>
  </div>
<% end %>
</div>
<br>
      <div style="border: solid 1px #b4a895; width:100%;">
        <br>
        <h5 style="padding-left: 10px;">estos productos deben estar escondidos, y deben aparecer cuando se haga una busqueda</h5>
        <br>
        
      </div>
      
        <div class="row" id="products" style="margin-left: 15px;">
         
        </div> 
      
    </div>
    <div class="col-md-3">

<div id="cajita" style="border: 1px solid white;">
  <%= render 'orders/index', orders: @orders if @orders.present? %>
</div>

     
</div>
</div>


<script type="text/javascript">
  $('#buscar').keyup(function(){
    console.log('hola')
    $.ajax({
        url: '<%= products_path%>',
        type: 'GET',
        dataType: 'script',
        data: {buscar: $('#buscar').val()}
      })
    .done(function(){
      console.log("success");
    })
    .fail(function(){
      console.log("error");
    });

  });

  var x = document.getElementById("demo");
function getLocation() {
 if (navigator.geolocation) {
 navigator.geolocation.getCurrentPosition(showPosition);
 } else {
 x.innerHTML = "Geolocation is not supported by this browser.";
 }
}
function showPosition(position) {
 x.innerHTML = "Latitude: " + position.coords.latitude +
 "<br>Longitude: " + position.coords.longitude;
}
  </script>
  <hr>
